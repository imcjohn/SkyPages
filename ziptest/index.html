<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Zipping GHPages</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.2.2/jszip.min.js"></script>
    <script src="ziphandler.js"></script>
</head>


<script>
    function generateUUID() {
        let uuid = '';
        const cs = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        for (let i = 0; i < 16; i++) {
            uuid += cs.charAt(Math.floor(Math.random() * cs.length));
        }
        return uuid;
    }

    function save(text) {

        const blob = new Blob(
            [
                "<html lang=\"en\"><head><title>Welcome To Skybin</title><head><body><pre>" +
                text +
                "</pre></body></html>"
            ],
            {type: "text/html"}
        );
        const formData = new FormData();
        formData.append("file", blob);

        const uuid = generateUUID();
        fetch(`/skynet/skyfile/${uuid}?filename=skybin.html`, {
            method: "POST",
            body: formData
        })
            .then(response => response.json())
            .then(console.log)
            .catch(console.log)
    }
</script>
<body>
<input type="file" id="files"/>
</body>
</html>